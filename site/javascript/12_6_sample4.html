<!doctype html>
<html>
<head>
<meta charset="UTF-8">
<title>DnD APIのサンプル</title>
<style>
div.d{
	padding:10px;
	margin:20px;
	width:100px;
	border:4px dotted black;
}
</style>
</head>
<body>
<p>下の画像はドラッグできます。</p>
<p><img src="img1.gif"><img src="img2.gif"><img src="img3.gif"></p>

<div class="d" id="dropzone">ここにドロップ</div>

<script>
document.addEventListener("dragstart",function(ev){
	var target = ev.target;	//ドラッグされた要素
	if(/^img$/i.test(target.tagName)){
		//img要素かどうか判定する
		ev.dataTransfer.setData("text/uri-list",target.src);	//URLを渡す
	}
},false);

//idが"dropzone"のdivにイベントを設定する
var dropzone=document.getElementById('dropzone');
//dragenterイベントをキャンセル
dropzone.addEventListener('dragenter',function(e){
  e.preventDefault();
},false);
//dragoverイベントでドラッグオペレーションを設定
dropzone.addEventListener('dragover',function(e){
  e.dataTransfer.dropEffect="copy";
  e.preventDefault();
},false);
dropzone.addEventListener('drop',function(ev){
	var data = ev.dataTransfer.getData("text/uri-list");
  var img=document.createElement("img");
  img.src=data;
  dropzone.appendChild(img);
},false);
</script>
</body>
</html>
