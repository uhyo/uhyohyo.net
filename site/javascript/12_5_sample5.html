<!doctype html>
<html>
<head>
<meta charset="UTF-8">
<title>File APIのサンプル</title>
</head>
<body>
<p>下のフォームで画像ファイルを選択してみてください。</p>
<p><input type="file" onchange="change(event)"></p>
<script>
// ファイルが選択されたらchange関数が呼び出される
function change(ev){
	//evにはイベントオブジェクトが入っている
	
	var files=ev.target.files;	//FileListオブジェクトを取得
	
	var file=files[0];	//最初のファイルを取得
	if(!file)return;	//ファイルがなかったらやめる

  // URL.createObjectURLはBlobを引数に取るので今回はFileReaderは不要
  var objurl = URL.createObjectURL(file);
  console.log(objurl);

  var img = document.createElement("img");	//新しい画像を作る
  img.src = objurl;	//URLなのでsrc属性に入れる
  document.body.appendChild(img);	//その画像を表示する
}

</script>
</body>
</html>
