<!doctype html>
<html>
<head>
<meta charset="UTF-8">
<title>妥当性テスト</title>
<style>
  input:invalid {
    background-color: #ffeeee;
  }
</style>
</head>
<body>
<form action="12_2_sample2.html">
<p>郵便番号：<input type="text" size="8" name="post" required placeholder="郵便番号" title="郵便番号は7桁の数字を入力して下さい。" pattern="\d{7}" oninput="inp(this)"></p>
<p>住所：<input type="text" size="70" name="address" required placeholder="郵便番号を入力すると住所が検索されます。"></p>
<p><input type="submit" value="送信"></p>
</form>

<script>
//郵便番号が変更された
function inp(input){

	if(input.checkValidity()){
		//正しく郵便番号が入力されている
		var address= input.form.elements["address"];	//住所のinput要素
		var bef=address.placeholder;	//前のプレースホルダーをとっておく
		address.placeholder="検索中...";

		//検索終了は1秒後（ダミー）
		setTimeout(function(){
			address.value="○○県□□市△△町";
			address.placeholder=bef;	//戻す
		},1000);
	}
}
</script>
</body>
</html>
