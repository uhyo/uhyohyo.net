<!doctype html>
<html>
<head>
<meta charset="UTF-8">
<title>妥当性テスト</title>
</head>
<body>
<form action="12_2_sample3.html">
<p>パスワード（必須・英数字とアンダーバーのみ）：<input type="text" size="20" name="password1" required placeholder="パスワード" pattern="\w+"></p>
<p>再度入力：<input type="text" size="20" name="password2" required placeholder="再度入力" onforminput="inp(this.form)"></p>
<p><input type="submit" value="送信"></p>
</form>

<script>
//フォームの内容が変更された
function inp(form){
	var password1=form.elements["password1"];	//もとのパスワード
	var password2=form.elements["password2"];	//再度入力

	if(password1.checkValidity()){
		//パスワードが正しくされている
		if(password2.value==password1.value){
			//同じだ
			password2.setCustomValidity("");	//妥当
		}else{
			password2.setCustomValidity("パスワードが一致しません。");	//妥当でない
		}
	}
}
</script>
</body>
</html>
