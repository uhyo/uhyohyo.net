<!doctype html>
<html lang="ja-jp">
  <head>
    <meta charset="UTF-8">
    <link href="/css/css.css" rel="stylesheet">
                  <link href="/css/js.css" rel="stylesheet">
                        <title>六章第一回　XML・XHTMLとは — JavaScript初級者から中級者になろう &#x2014; uhyohyo.net</title>
        <script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-46093038-1', 'auto');
ga('send', 'pageview');
    </script>
  </head>
  <body>
    <header>
      <h1>
        <a href="/">uhyohyo.net</a>
      </h1>
    </header>
    <main>
      
<article> 
  <h1>JavaScript初級者から中級者になろう</h1>
  <aside class="ad-javascript">
    <!-- Google Adsense -->
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle"
     style="display:inline-block;width:180px;height:150px"
     data-ad-client="ca-pub-1080533149094679"
     data-ad-slot="7536196754"></ins>
    <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
  </aside>
        <nav>
      <p>
        <a href="index.html" rel="bookmark">戻る</a>
                            |
          <a rel="prev" href="5_3.html">五章第三回</a>
                          |
          <a rel="next" href="6_2.html">六章第二回</a>
              </p>
    </nav>
    <h2>六章第一回　XML・XHTMLとは</h2>
<p>六章では、DOMにおけるXMLとXHTMLの扱いについて解説していきます。そこで、まずXML・XHTMLとは何かということを解説していきます。</p>

<h3>XML</h3>
<p><strong>Extensible Markup Language</strong>(<dfn>XML</dfn>)は、HTMLと同じように<strong>タグ</strong>を使ってさまざまなデータを表すことができる仕組みです。</p>
<p>さまざまなデータとは、本当になんでもいいのです。XMLによってつくられたデータは、さまざまなことに利用されます。例えば、プログラムがデータを保存するのに使ったりされます。</p>
<p>HTMLと比べて最大の特徴は、自分で仕様を決められるという点です。つまり、自分でタグ名あるいは属性名などを決められるということです。具体的なXML文書の例を示します。</p>
<pre><code>&lt;?xml version="1.0" ?&gt;
&lt;users&gt;
  &lt;ユーザー&gt;
    &lt;名前&gt;Aさん&lt;/名前&gt;
    &lt;年齢&gt;23&lt;/年齢&gt;
  &lt;/ユーザー&gt;
  &lt;ユーザー&gt;
    &lt;名前&gt;Bさん&lt;/名前&gt;
    &lt;年齢&gt;100&lt;/年齢&gt;
  &lt;/ユーザー&gt;
&lt;/users&gt;
        </code></pre>
<p>まず一見して違和感を覚えるのは、タグ名が日本語であるものがあるということですね。前述のようにXMLではタグ名も自由に決めることができるので、このように日本語も可能です。とはいっても、やはり普通に半角英数字で書くということのほうが多いと思います。そのほうが国際的ですしね。</p>
<p>最初の行の<code>&lt;?xml version="1.0" ?&gt;</code>は、XMLでは書くことになっているもので、この文書がXMLであることを表すものです。XML文書には、これが必要です。</p>
<p>次に、この文書全体は<code>&lt;users&gt; 〜 &lt;/users&gt;</code>で囲われています。このような要素を<strong>ルート要素</strong>などといいます。HTMLでもルート要素はありましたね。全体が<code>&lt;html&gt; 〜 &lt;/html&gt;</code>で囲まれているから、html要素がルート要素だといえますね。</p>

<p>そして、そのなかには<code>&lt;ユーザー&gt; 〜 &lt;/ユーザー&gt;</code>の組が2つあります。実は今回例としたこの文書は、ユーザーの一覧を例にしたものでした。</p>
<p>ここで、XMLでデータをつくることの利点が出てきています。このような、階層構造（木構造）を簡単に表現できるという点です。</p>
<p>今回の場合、</p>
<pre><code>users
｜
├――ユーザー
｜　　　 ｜
｜　　　 ├――名前
｜　　　 ｜
｜　　　 └――年齢
｜
└――ユーザー
　　　　 ｜
　　　　 ├――名前
　　　　 ｜
　　　　 └――年齢
          </code></pre>
<p>という木構造になっていて、usersがユーザーのリストで、それぞれのユーザーは名前と年齢というデータを持っているということは簡単に分かります。</p>
<p>人間が見た目にも分かりやすいというのも利点のひとつかもしれません。</p>

<p>ここで、「users」「ユーザー」「名前」「年齢」というタグ名は誰が決めたのでしょうか。今回に限って言えば筆者たる自分ですが、一般にそのプログラムで使うデータを作る場合、そのプログラムを作った人が、そのXMLをどんな構造にするか、どんなタグ名を使うかということも決めます。有名になったりすると、複数のプログラムで共通の書き方が使われるかもしれません。広く普及してスタンダードになったものもたくさんあります。そうなると、別の名前が付けられたりします。例えばSVGという画像フォーマットがありますが、その中身はただのXMLファイルです。XMLでこう書いたらこういう画像になる、というルールが決められてそれが標準となったので、いまSVGとして広く知られています。</p>
<p>また、どのような構造にするかも決めます。今回の場合ルート要素がusersで、usersの子はいくつかのユーザー要素で、それぞれのユーザー要素は名前と年齢を持つ、ということになります。</p>
<p>構造がしっかりと決まっていれば、プログラムからそれを読み込むのも容易です。</p>
<p>また、XMLでは、複雑なデータを表すことができます。複雑なデータでも分かりやすく書くことができるのですが、複雑でも読み込むのが容易だというのがよく使われる理由だといえます。というのも、前に<strong>DOMはHTMLだけでなくXMLも扱うことができる</strong>ということを解説しました。複雑なXMLも、DOMを使えば読み込むのは簡単なのです（DOM以外にもXMLを扱う手段は一応あります）。</p>
<p>また、DOMが使えるのは、JavaScriptだけではありません。Javaだったり、あるいはPHPなどでもDOMを使うことができるそうです。他にもあると思います。</p>

<h4>DOMでXMLを扱う</h4>
<p>DOMでは、HTMLだけでなくXMLも扱えます。つまり、こんな感じです。</p>
<pre><code>var xmlDocument;	<mark class="comment">//このxmlDocumentはHTMLでいうところのdocumentにあたるもので、XML文書全体を表します。ここでは上のサンプルの文書の場合を想定します。</mark>

var users = xmlDocument.<mark>documentElement</mark>;	<mark class="comment">//documentElementはルート要素だから、今回の場合users要素の<strong>ノード</strong>になります。このノードというのも、HTMLを扱うときのノードと同じ概念です。</mark>
users.<mark>getElementsByTagName</mark>('ユーザー');		//usersが持つユーザー要素のリストを返します。2つのユーザー要素がありますね。
          </code></pre>
<p>xmlDocumentを実際に取得する方法をここでは書いていないため、実際に実行できるサンプルではないので理解しにくいかもしれませんが、こんな感じでXMLも扱えます。</p>
<p>実際に存在するXMLを読み込んで処理したりすることももちろんできますが、それはまたそのうち解説します。</p>

<h3>XHTML</h3>
<p>また、<dfn>XHTML</dfn>というものがあります。もともとHTMLはXMLとは似ていても少し違うものでしたが、そこで、HTMLをXML文書の一種として書けるようにしたものを作りました。それがXHTMLです。したがって、XHTMLは、XMLとしても通用するということになります。</p>

<h4>HTMLとの相違点</h4>
<p>基本はHTMLと同じですが、XMLの厳密な仕様に対応させるために、多少の相違点が生まれます。</p>
<p>例えば、<strong>要素名や属性名は小文字にする</strong>ということです。HTMLでは<code>&lt;HTML&gt; 〜 &lt;/HTML&gt;</code>と<code>&lt;html&gt; 〜 &lt;/html&gt;</code>は同じものとして扱われましたが、そういうわけにはいかなくなります。</p>
<p>というのも、そもそも<strong>XMLが大文字と小文字を区別する</strong>からこのようなことになっています。「HTML」と「html」を違うものとして扱うXMLにあわせるためには、「大文字と小文字どちらでもOK」というわけにはいかなくなったのです。</p>
<p>そこで、XHTMLでは全て<strong>小文字に統一</strong>されました。厳密にXHTMLを解釈した場合、タグ名が大文字の場合、「こんなタグ知らない」といわれて正しく表示されないということになります。</p>

<p>また、もうひとつ大きな違いがあります。それは、<strong>終了タグが絶対に必要</strong>だということです。</p>
<p>HTMLでは、終了タグは省略可能なものがあり、例えばli要素の終了タグは</p>
<pre><code>&lt;ul&gt;
  &lt;li&gt;あああ&lt;/li&gt;
  &lt;li&gt;いいい&lt;/li&gt;
  &lt;li&gt;ううう&lt;/li&gt;
&lt;/ul&gt;</code></pre>
<p>というリストがあった場合、</p>
<pre><code>&lt;ul&gt;
  &lt;li&gt;あああ
  &lt;li&gt;いいい
  &lt;li&gt;ううう
&lt;/ul&gt;</code></pre>
<p>のように省略ができました。しかし、XHTMLではこれらの省略は認められません。そもそもXMLに終了タグの省略という仕様がないからです。</p>
<p>そもそもXMLはいろいろなデータに利用できる汎用的な仕様だから、あらかじめタグ名によってこのタグは省略可能だとかそういうことは決められませんね。</p>
<p>また、これは、もともと終了タグがないタグも例外ではありません。</p>
<p>例えば、HTMLでは終了タグがない</p>
        <pre><code>&lt;img src="aaa.gif" alt="aaa"&gt;</code></pre>
<p>のようなものにも終了タグが必要です。どうすればいいかというと、imgは「中身がない要素」として扱い、</p>
        <pre><code>&lt;img src="aaa.gif" alt="aaa"&gt;<mark>&lt;/img&gt;</mark></code></pre>
<p>のように開始タグの直後に終了タグを置きます。</p>
<p>ただ、このように中身が何もない場合、次のような省略記法が許されています。</p>
        <pre><code>&lt;img src="aaa.gif" alt="aaa" <mark>/</mark>&gt;</code></pre>
<p>開始タグと終了タグがひとつになり、もともとのHTMLの書き方に近くなりました。これはどんなタグでも同じです。<code>&lt;br /&gt;</code>のような書き方は目にしたことがあるのではないでしょうか。</p>

<p>ついでに、style要素やscript要素を書くときにも注意が必要です。具体的には、style要素やscript要素の中身を次のようにしないといけません。</p>
<pre><code>&lt;script type="text/javascript"&gt;<mark>&lt;![CDATA[</mark>
  var aaa = 123;
  console.log(aaa*2);
<mark>]]&gt;</mark>&lt;/script&gt;
        </code></pre>
<p>script要素の中身の全体が<code>&lt;![CDATA[ 〜 ]]&gt;</code>で囲まれています。これで囲んだ部分は<strong>CDATAセクション</strong>といって、style要素やscript要素の中身は普通これにします（絶対というわけではありませんが）。</p>
<p>一応、これら以外でもCDATAセクションは使えます。これの意味ですが、CDATAセクションの中では特別な意味を持つ文字も記述できることになっています。つまり、<code>&lt; &gt;</code>などはタグを記述するのに使われる記号だから、普通<code>&amp;lt; &amp;gt;</code>のように書く必要がありますが、CDATAセクションの中ではこれらはそのまま書くことが出来ます。だから、</p>
<pre><code>&lt;script type="text/javascript"&gt;&lt;![CDATA[
  var a = 10;
  if(a <mark>&lt;</mark> 5){
    }else if(a <mark>&gt;</mark> 15){
  }
]]&gt;&lt;/script&gt;
</code></pre>
<p>のように書くことが出来ます。ただし、例外として、
  <code>]]&gt;</code>
  だけは直接書けません。CDATAセクションの終わりだと解釈されてしまうからですね。</p>
<p>ちなみに、逆に言うと、CDATAセクションを使わない場合</p>
<pre><code>&lt;script type="text/javascript"&gt;
var a = 10;
if(a <mark>&amp;lt;</mark> 5){
    }else if(a <mark>&amp;gt;</mark> 15){
}
&lt;/script&gt;
          </code></pre>
<p>のように書かないといけないということです。なぜなら、<code>&lt;</code>などをそのまま書いた場合、それがタグの始まりと解釈されてしまい文法エラーになるからです。これもHTMLとは違う点ですね。HTMLでは一応、そのまま書くことが出来ました（これも実はscript要素の特例的な処理の賜物です。いちいちscript要素中で<code>&amp;lt;</code>などと書くのは面倒くさいですよね）。</p>
        <nav>
      <p>
        <a href="index.html" rel="bookmark">戻る</a>
                            |
          <a rel="prev" href="5_3.html">五章第三回</a>
                          |
          <a rel="next" href="6_2.html">六章第二回</a>
              </p>
    </nav>
  </article>

    </main>
  </body>
</html>
    
