<!doctype html>
<html lang="ja-jp">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <link href="/css/css.css" rel="stylesheet">
                  <link href="/css/js.css" rel="stylesheet">
                        <title>二章第十四回　nullとundefined — JavaScript初級者から中級者になろう &#x2014; uhyohyo.net</title>
        <script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-46093038-1', 'auto');
ga('send', 'pageview');
    </script>
  </head>
  <body>
    <header>
      <h1>
        <a href="/">uhyohyo.net</a>
      </h1>
    </header>
    <main>
      
<article> 
  <h1>JavaScript初級者から中級者になろう</h1>
  <aside class="ad-javascript">
    <!-- Google Adsense -->
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle"
     style="display:inline-block;width:180px;height:150px"
     data-ad-client="ca-pub-1080533149094679"
     data-ad-slot="7536196754"></ins>
    <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
  </aside>
        <nav>
      <p>
        <a href="index.html" rel="bookmark">戻る</a>
                            |
          <a rel="prev" href="2_13.html">二章第十三回</a>
                          |
          <a rel="next" href="3_1.html">三章第一回</a>
              </p>
    </nav>
    <h2>二章第十四回　nullとundefined</h2>
<p>今回はDOMから少し離れて、<dfn>null</dfn>と<dfn>undefined</dfn>について解説します。これらはオブジェクトではなく<strong>プリミティブ値</strong>で、文字列、数値、真偽値に続く、第四・第五の値です。</p>
<p>「true」「false」と書くとその名の変数ではなくプリミティブである真偽値を表すのと同様に、「null」「undefined」と書くとそれぞれnull,undefinedという個別の値を表します（実は厳密には少し異なり、undefinedだけは書き換えできない変数という扱いになっていますが）。</p>

<h3>null</h3>
<p>意味的には、nullは「<strong>何もない</strong>」ということを意味します。「何もないということを教えるための値」ともいうことができます。</p>
<p>例えば、nullは次のような時に出現します。</p>
<pre><code>&lt;!doctype html&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;test&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;p&gt;test&lt;/p&gt;

    &lt;script type="text/javascript"&gt;
      var nodelist = document.getElementsByTagName('p');

      console.log(nodelist.item(<mark>100</mark>));
    &lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;
        </code></pre>
<p>「null」と表示されます。</p>
<p>このサンプルでやっていることは、まずp要素のNodeListを変数nodelistに代入し、その「100番目」を表示しようとしています。</p>
<p>しかし、このサンプルにはp要素はひとつしかありません。当然、100番目なんてあるわけがありません。つまり、「<strong>存在しない</strong>」ということになります。</p>
<p>こういうときにnullが活躍します。このように存在しない場合、itemメソッドは<strong>nullを返します</strong>。これは、NodeListでもHTMLCollectionでも同じです。</p>
<p>他にもさまざまな場面で出てきます。例えば、getElementByIdで該当するidを持つ要素が無かったときもnullを返しますし、各種フォームコントロールが持つformプロパティで、そのコントロールがform要素に所属していなかった場合もnullです。</p>
<p>他に、次のような場合もあります。</p>
<pre><code>var newelement = document.createElement('p');

console.log(newelement.<mark>parentNode</mark>);
          </code></pre>
<p>これは、createElementで新しくp要素を作り、それのparentNode、つまり親要素を表示しています。</p>
<p>しかし、createElementで作った要素は、まだ木構造には加わっていないのでした。つまり、<strong>親が無い</strong>ということになります。こういう場合にもnullが返るのです。</p>
<p>さらに、firstChildやlastChild（<a href="2_4.html">二章第四回</a>）も、子ノードが1つもない場合は存在しないのでnullです。previousSiblingやnextSibling（<a href="2_7.html">二章第７回</a>）も、存在しない場合があり、そういう場合nullです。</p>

<p>また、自分からnullを使う場合もあります。例えば、insertBefore（<a href="2_6.html">二章第六回</a>）では、第二引数にノードの代わりに<strong>null</strong>を渡すことができます。こうすると、そのノードは<strong>一番最後</strong>に追加されます。普通にappendChildでいいような気もしますが、この仕様は次のような場合に役に立ちます。</p>
<pre><code>&lt;!doctype html&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;test&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;p&gt;test&lt;/p&gt;
    &lt;script type="text/javascript"&gt;
      var newp = document.createElement('p');

      document.body.<mark>insertBefore</mark>(newp, document.body.<mark>firstChild</mark>);
    &lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;
        </code></pre>
<p>p要素を作り、それをinsertBeforeでbody要素に追加しているだけです。</p>
<p>第二引数がdocument.bodyのfirstChild、つまり最初の子ノードです。それよりも前にだから、つまりは<strong>先頭</strong>に追加しようとしていることがわかります。</p>
<p>ここで、もしbodyに<strong>子ノードが無かったら</strong>どうでしょう。firstChildは上で解説した通り<strong>null</strong>です。ここで、insertBeforeの第二引数が、「nullだったらどこに追加したら分からないから追加しないよ」のような仕様だった場合、結局追加されずに終わってしまいます。</p>
<p>ところが、この仕様があることで一番最後に追加され（もともと空っぽだったのでそれは一番最初でもあります）、もし子ノードがなくても思い通りに追加されることが保証されるわけです。</p>

<h3>undefined</h3>
<p>undefinedは、直訳すると「<strong>定義されていない</strong>」という意味です。これは、定義する必要がない、つまり、普通触れられない、触れることを想定されていないというものです。</p>
<p>例えば、</p>
<pre><code>var a = {};
console.log(a.<mark>aaa</mark>);</code></pre>
<p>という場合があります。aという空のオブジェクトをつくり、そのaaaというプロパティをいきなり表示しています。しかし何も入っていませんね。このような場合、undefinedが入っていることになります。「undefined」と表示されるのが分かると思います。</p>

<p>また、次のような場合もundefinedが出てきます。</p>
<pre><code>function a(){
}
var b = a();
console.log(b);
          </code></pre>
<p>何もしないaという関数をつくり、bにその<strong>戻り値</strong>を代入しています。しかし、関数aはreturnで何か値を返しているわけではありません。このように、何も返さない関数は、実はundefinedを返しています。<code>return;</code>のように、return文で返す値を省略した場合も同じです。</p>

<h3>if文</h3>
<p>さて、今までif文には、真偽値を渡してきました。例えば、</p>
<pre><code>if(<mark>a == 3</mark>){
〜
}</code></pre>
<p>という場合、<code>a == 3</code>はtrueかfalseを返します。それがifに渡され、trueなら真、falseなら偽というものでした。</p>
<p>では、ifに真偽値以外の値を渡したらどうなるのでしょう。</p>
<pre><code>if(<mark>10</mark>){
    console.log("真");
}else{
    console.log("偽");
}</code></pre>
<p>この場合、「真」が表示されるので、10という数値は真であることが分かります。他にもいろいろ試してみましょう。</p>
<p>実は、ifに渡すと偽になる値は、限られています。<strong>0</strong>と、<strong>空文字列</strong>（つまり<code>""</code>）、<strong>false</strong>、<strong>null</strong>、<strong>undefined</strong>などです。</p>
<p>これ以外の値は、全て真です。また、オブジェクトも全て真です。</p>
<p>これらは、次のような場合に役立ちます。</p>
<pre><code>if(node.<mark>firstChild</mark>){
    処理
}</code></pre>
<p>（ここで、変数nodeには、何かノードのオブジェクトが代入されているものとします。）このコードでは、<strong>nodeが子ノードを持っているかどうか</strong>を判定しています。しかし、このような判定にはhasChildNodes（<a href="2_4.html">二章第四回</a>）を使うはずでした。もちろんそれでもいいですが、この方法でも問題なく判定できます。</p>
<p>なぜなら、ノードが1つでも子ノードを持っていれば、「最初の子ノード」が必ずあるため、node.firstChildにはノードのオブジェクトが代入されています。つまり、真となります。</p>
<p>対して、子ノードがひとつもない場合は<strong>null</strong>です。nullは偽だから、子ノードが1つもない場合は偽ということになります。</p>
        <nav>
      <p>
        <a href="index.html" rel="bookmark">戻る</a>
                            |
          <a rel="prev" href="2_13.html">二章第十三回</a>
                          |
          <a rel="next" href="3_1.html">三章第一回</a>
              </p>
    </nav>
  </article>

    </main>
  </body>
</html>
    
