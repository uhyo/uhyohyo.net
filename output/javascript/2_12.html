<!doctype html>
<html lang="ja-jp">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <link href="/css/css.css" rel="stylesheet">
                  <link href="/css/js.css" rel="stylesheet">
                        <title>二章第十二回　フォームの操作 — JavaScript初級者から中級者になろう &#x2014; uhyohyo.net</title>
        <script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-46093038-1', 'auto');
ga('send', 'pageview');
    </script>
  </head>
  <body>
    <header>
      <h1>
        <a href="/">uhyohyo.net</a>
      </h1>
    </header>
    <main>
      
<article> 
  <h1>JavaScript初級者から中級者になろう</h1>
  <aside class="ad-javascript">
    <!-- Google Adsense -->
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle"
     style="display:inline-block;width:180px;height:150px"
     data-ad-client="ca-pub-1080533149094679"
     data-ad-slot="7536196754"></ins>
    <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
  </aside>
        <nav>
      <p>
        <a href="index.html" rel="bookmark">戻る</a>
                            |
          <a rel="prev" href="2_11.html">二章第十一回</a>
                          |
          <a rel="next" href="2_13.html">二章第十三回</a>
              </p>
    </nav>
    <h2>二章第十二回　フォームの操作</h2>
<p>フォームについての説明は、<a href="kiso6.html">基礎第六回</a>にあります。</p>

<h3>HTMLFormElement</h3>
<p>form要素のHTMLElementは、<dfn>HTMLFormElement</dfn>と呼ばれます。</p>
<p>このform要素ですが、今までと同様にgetElementByIdなどで取得することも可能ですが、実は専用のものもあります。</p>
<p>それは、documentが持つ<dfn>forms</dfn>というプロパティで、これは<strong>HTMLCollection</strong>です。つまり、例えば</p>
<pre><code>&lt;!doctype html&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;test&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;form action="?"&gt;
    &lt;/form&gt;

    &lt;script type="text/javascript"&gt;
      var form = document.<dfn>forms</dfn>.item(0);

      console.log(form);
    &lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;
        </code></pre>
<p>のようにしたとき、変数formには、0番目のform要素が代入されていることになります。formを表示してみるとHTMLFormElementと表示されるので、ちゃんとform要素であることが分かります。（実際はちゃんとフォームの中には何か置きましょう）</p>

<p>さて、それではこのHTMLFormElementはどんな機能を持っているのでしょうか。</p>

<h4>elements</h4>
<p><dfn>elements</dfn>というプロパティを持っています。これは、そのフォームが持つ<dfn>コントロール</dfn>のHTMLCollectionです。コントロールとは、フォームの中にある操作出来るもののことで、select要素とか、input要素とか、textarea要素とか、button要素などが当てはまります。</p>
<p>フォームコントロール1つ1つに何か処理をしたいときなどに使えます。</p>

<h4>HTMLFormElementのメソッド</h4>
<p>HTMLFormElementは、2つのメソッドを持っています。<dfn>submit</dfn>と<dfn>reset</dfn>で、どちらも引数はありません。これらは、
  <pre><code>&lt;input type="<mark>submit</mark>" value="送信"&gt;
&lt;input type="<mark>reset</mark>" value="送信"&gt;
        </code></pre>
<p>これらのボタンを押したのと同じ動作をします。</p>
<p>つまり、submitメソッドはそのフォームを送信し、resetメソッドはそのフォームをリセットします。</p>
<pre><code>&lt;!doctype html&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;test&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;form action="<mark>http://www.google.com/</mark>"&gt;
    &lt;/form&gt;

    &lt;script type="text/javascript"&gt;
      var form = document.forms.item(0);

      form.<dfn>submit</dfn>();
    &lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;
          </code></pre>
<p>このサンプルは、実行するといきなりGoogleにジャンプします。これは、JavaScriptによってフォームが送信され、そのフォームの送信先がGoogleになっているからです。</p>

<h3>HTMLInputElement</h3>
<p>さて、それでは、1つ1つのコントロールの操作について見ていきましょう。</p>
<p>まずは、そのうちinput要素です。input要素のHTMLElementは、<dfn>HTMLInputElement</dfn>といいます。このHTMLInputElementは多くのプロパティを持っていますが、input要素は、入力ボックスやボタン、チェックボックスなどさまざまな種類のコントロールがひとつの要素にまとまっているため、それぞれの種類専用のプロパティなどがあります。</p>

<h4>汎用のプロパティ</h4>
<p>まず、どんな種類のinputでも使えるプロパティを見てみます。</p>
<p><dfn>form</dfn>プロパティは、そのコントロールが所属するフォームの要素、つまりHTMLFormElementが代入されています。書き換えはできません。所属するフォームを変えるには、そのフォームのノードを別のフォームの下にくっつける作業が必要になります。</p>

<p>また、<dfn>value</dfn>プロパティは、そのvalue属性を取得できます。ただし、入力ボックスの場合は、初期値（最初から入力されている値）がvalue属性であり、入力ボックスの中身が変更された場合、<strong>変更後の値を取得します</strong>。変更前の値（value属性）を取得するには、<dfn>defaultValue</dfn>プロパティを使います。</p>
<pre><code>&lt;!doctype html&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;test&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;form action="?"&gt;
      &lt;p&gt;
        &lt;input id="aaa" type="text" value="testtest"&gt;
        &lt;input type="button" value="check" onclick="check();"&gt;
      &lt;/p&gt;
    &lt;/form&gt;
      &lt;script type="text/javascript"&gt;
      function check(){
        var input = document.getElementById('aaa');
        console.log(input.<dfn>value</dfn>);
      }
    &lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;
        </code></pre>
<p>今回のサンプルでは、ユーザーが変更した後で処理をするために、イベントを使用しています。詳しくは<a href="kiso5.html">基礎第五回</a>を参照して下さい。</p>
<p>これを実行すると、画面には"testtest"が入力された入力ボックスとボタンがあります。ボタンを押すと、check関数が呼ばれます。</p>
<p>check関数では、入力ボックスのHTMLElementをgetElementByIdによって取得し（そのためにinputにはid属性をつけています）、そのvalueプロパティを表示しています。入力ボックスを変更すると、変更後の値がそのまま表示されることがわかります。</p>

<p><dfn>disabled</dfn>プロパティは、disabled属性を取得します。しかし、disabled属性は、</p>
        <pre><code>&lt;input <mark>disabled</mark> type="button" value="test"&gt;</code></pre>
<p>のように、値を持たず、あるかないかだけです。それをどう扱うかというと、disabledプロパティは、文字列ではなく、<strong>真偽値</strong>が入っています。すなわち、あればtrue、なければfalseです。書き換えできますが、この場合も真偽値を代入しなければなりません。</p>

<p><dfn>type</dfn>プロパティは、そのコントロールの種類が文字列で入っています。書き換えられません。</p>
<pre><code>&lt;!doctype html&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;test&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;form action="?"&gt;
      &lt;p&gt;
        &lt;input type="text" value="test"&gt;
        &lt;input type="button" value="test"&gt;
        &lt;input type="checkbox" value="test"&gt;
        &lt;input type="radio" value="test"&gt;
      &lt;/p&gt;
    &lt;/form&gt;

    &lt;script type="text/javascript"&gt;
      var form = document.forms.item(0);

      for(var i=0; i &lt; form.<mark>elements</mark>.length; i++){
        console.log(form.elements.item(i).<dfn>type</dfn>);
      }
    &lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;
        </code></pre>
<p>このサンプルでは、まずform要素を取得し、for文とform.elementsによってフォームが持つコントロールひとつひとつについて処理をしています。このようなfor文の書き方については、過去に解説しています。iが0からform.elementsの最後の要素の番号まで増加するため、ひとつひとつの要素について処理をすることができるのでした。</p>
<p>そのひとつひとつの要素が、itemメソッドで取得したform.elements.item(i)です。これのtypeを表示しています。</p>
<p>「text」「button」「checkbox」「radio」と表示されます。</p>

<p>さて、<dfn>blur</dfn>、<dfn>focus</dfn>、<dfn>click</dfn>というメソッドも持っています。すべて引数はありません。blurは、そのコントロールから<strong>フォーカス</strong>を外し、逆にfocusは与えます。</p>
<p>clickは、そのコントロールを<strong>クリックしたことにします</strong>。例えば、ボタンなら押されるし、チェックボックスやラジオボタンも押されたことになります。ただし、入力ボックスの場合は効果がなく、何も起きません。</p>

<h4>入力ボックス</h4>
<p>入力ボックス（typeが"text"か"password"の場合）は、まず<dfn>readOnly</dfn>プロパティが使えます。これは、readonly属性を取得するものですが、disabledと同じく</p>
        <pre><code>&lt;input <mark>readonly</mark> type="text" value="testtest"&gt;</code></pre>
<p>のような指定をするため、真偽値です。</p>

<p>また、<dfn>select</dfn>というメソッドがあります。引数はありません。これは、入力ボックスの文字を全て選択状態にするというものです。</p>

<h4>チェックボックス・ラジオボタン</h4>
<p>チェックボックスやラジオボタン（"checkbox","radio"）の場合、<dfn>checked</dfn>というプロパティを使えます。これは<strong>真偽値</strong>で、そのinputがチェックされていればtrue、されていなければfalseです。</p>
<p>また、<dfn>defaultChecked</dfn>というプロパティもあります。同じく真偽値で、<strong>もともと</strong>チェックされていたかどうか、つまりchecked属性があるかどうかということです。</p>

<h3>HTMLTextAreaElement</h3>
<p>HTMLTextAreaElementは、textarea要素のHTMLElementで、input要素（入力ボックスの場合）と同じように扱えます。</p>

<h3>HTMLButtonElement</h3>
<p>HTMLButtonElementは、button要素のHTMLElementで、これもinput要素（ボタンの場合）と同じように扱えます。</p>
        <nav>
      <p>
        <a href="index.html" rel="bookmark">戻る</a>
                            |
          <a rel="prev" href="2_11.html">二章第十一回</a>
                          |
          <a rel="next" href="2_13.html">二章第十三回</a>
              </p>
    </nav>
  </article>

    </main>
  </body>
</html>
    
